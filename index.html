<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Викторина</title>
  <style>
    /* Интерфейс занимает весь экран */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background-color: #000033;
      color: white;
      font-family: Arial, sans-serif;
      box-sizing: border-box;
    }
    h1 {
      margin-top: 10px;
      text-align: center;
    }
    /* Контейнер для категорий растянут на всю ширину */
    .container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 10px;
      width: 100%;
      max-width: 1000px;
      margin: 20px auto;
      padding: 10px;
    }
    .category {
      background-color: blue;
      padding: 20px;
      font-size: 24px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      border: 2px solid white;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 150px;
      flex-direction: column;
    }
    .category .counter {
      margin-top: 10px;
      font-size: 16px;
    }
    /* Стили для кнопки перезапуска викторины */
    #restartButton {
      background: linear-gradient(to right, #ff0000, #990000);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 20px;
      cursor: pointer;
      margin: 20px auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Абай туралы</h1>
  <!-- Контейнер с категориями -->
  <div class="container" id="categoriesContainer">
    <!-- Сюда динамически будут добавляться категории -->
  </div>

  <!-- Кнопка для перезапуска викторины -->
  <button id="restartButton" onclick="restartQuiz()">Қайта бастау</button>

  <script>
    /* Вопросы по категориям – функционал оставляем прежним */
    const questions = [
      // Категория 0: Абайдың өмірбаяны (7 вопросов)
      [
        {
          q: "Абайдың шын аты кім? (10)",
          a: ["Мухамедқанафия", "Ибраһим", "Ақжігіт", "Сәдуақас"],
          correct: 1
        },
        {
          q: "XIX ғасырдың екінші жартысы мен XX ғасырдың алғашқы ширегінде өмір сүрген көрнекті қазақ ақыны, нақыл сөздің атасы, мысалшы, аудармашы, сазгер, Абайдың немере інісі кім? (20)",
          a: ["Шәкәрім Құдайбердіұлы", "Сәбит Мұқанов", "Мұхтар Әуезов", "Әлихан Бөкейханов"],
          correct: 0
        },
        {
          q: "Өскенбай Абайға кім болады? (10)",
          a: ["Әкесі", "Атасы", "Інісі", "Шөбересі"],
          correct: 1
        },
        {
          q: "Әйкерімнің бұрыңғы аты кім болған және жаңа есімді кім берген? (10)",
          a: ["Шүкімән, Абай берген", "Шүкімән, Абай қойған", "Айман, Абай берген", "Айман, Абай қойған"],
          correct: 1
        },
        {
          q: "Абай Ахмет – Риза медресесінде қай жылдары оқиды? (20)",
          a: ["1850-1853", "1855-1858", "1860-1863", "1858-1861"],
          correct: 1
        },
        {
          q: "Абай орыс ұлтының өкілдерінен кімдермен дос болды? (20)",
          a: ["А.Некрасов, М.Крылов, В.Гюго, Л.Толстой", "Е.П.Михаэлис, Н.Долгополов, С.Гросс, А.Леонтьев", "И.Рахманинов, П.Ильич, Д.Менделеев, А.Сталин", "Б.Соломонин, М.Салтыков-Щедрин, Ф.Абрамов, Н.Гоголь"],
          correct: 1
        },
        {
          q: "Абайдың әжесінің аты кім? (10)",
          a: ["Зере", "Меруерт", "Сағыта", "Айгүл"],
          correct: 0
        }
      ],
      // Категория 1: Абайдың өлеңдері (8 вопросов)
      [
        {
          q: "«Жігіттер, ойын арзан, күлкі қымбат» өлеңінде ақын қандай мәселе көтереді? (20)",
          a: ["Махаббат", "Достық мәселесі", "Еңбек", "Бостандық"],
          correct: 1
        },
        {
          q: "«...Көңілге түрлі ой салар, әнді сүйсең менше сүй!» – деген өлең жолдары қай өлеңнен алынған? (20)",
          a: ["Қыс", "Құлақтан кіріп бойды алар", "Жаз", "Күз"],
          correct: 1
        },
        {
          q: "Ақын ел билеушілерінің типтік бейнесін қай өлеңдерінде бейнелеген? (20)",
          a: ["Сенбіде, Жексенбіде", "Болыс болдым мінеки, Мәз болады болысың", "Кемел болдым, Діл болдым", "Аруақ болдым, Жан болдым"],
          correct: 1
        },
        {
          q: "Қай шығармадан? Тамағы тоқтық, Жұмысы жоқтық, Аздырар адам баласын. (20)",
          a: ["Алты аяқ", "Сегіз аяқ", "Он аяқ", "Жеті аяқ"],
          correct: 1
        },
        {
          q: "Қай шығармадан? ............................................................ Екі түрлі нәрсе ғой сыр мен сымбат. Арзан, жалған күлмейтін, шын күлерлік Ер табылса, жарайды қылса сұхбат. (20)",
          a: ["Сегіз аяқ", "Жігіттер, ойын арзан, күлкі қымбат", "Ақ күн", "Көк аспан"],
          correct: 1
        },
        {
          q: "Абайдың табиғат лирикасына арналған шығармаларын атаңыз. (20)",
          a: ["Қыс, Жазғытұрым, Күз, Жаз; Желсіз түнде жарық ай; Қараша, желтоқсан мен сол бір-екі ай", "Көктем, Жаз, Күз, Қыс", "Жаз, Күз, Қыс", "Мөлдір түн, айдың жарығы"],
          correct: 0
        },
        {
          q: "Абайдың бір өлеңін жатқа оқып беріңіз (20)",
          a: [],
          correct: null
        },
        {
          q: "Абайдың өлеңдерінде сандық компоненті бар өлеңді атаңыз (20)",
          a: [],
          correct: null
        }
      ],
      // Категория 2: Әр-түрлі сұрақтар (7 вопросов)
      [
        {
          q: "«Зере мен Ұлжан – тек Абайдың ғана емес, барлық халықтың анасы. Елінің мұңын мұңдап, жырын жырлаған аналар болып қала береді» Б.Момышұлы (20)",
          a: [],
          correct: null
        },
        {
          q: "«Абай – қазақтың бас ақыны» дегенді кім айтқан? (20)",
          a: ["М.Әуезов", "А.Байтұрсынов", "С.Торайғыров", "Ж.Қожаназ"],
          correct: 1
        },
        {
          q: "Абайдың 150-жылдық тойы қай жылы тойланды? (10)",
          a: ["1990", "1995", "2000", "1985"],
          correct: 1
        },
        {
          q: "Абайдан неше поэма қалған? (3) (10)",
          a: ["2", "3", "4", "5"],
          correct: 1
        },
        {
          q: "Абай Лермонтовтан жалпы саны қанша шығарма аударған? (20)",
          a: ["25", "26", "27", "28"],
          correct: 2
        },
        {
          q: "Еуропаға Александр Македонский деген атпен белгілі қолбасшының өмірі жайлы аңыздар негізінде жазылған поэмасын көрсетіңіз. (10)",
          a: ["Ескендір", "Александр", "Македон", "Ұлы жауыз"],
          correct: 0
        },
        {
          q: "Абай қайда жерленген? (10)",
          a: ["Алматы", "Нұр-Сұлтан", "Жидебай", "Шымкент"],
          correct: 2
        }
      ],
      // Категория 3: Қара сөздер (7 вопросов)
      [
        {
          q: "Қара сөздер ең алғашқы қай қалада жарық көрді? (20)",
          a: ["Алматы", "Семей", "Астана", "Қарағанды"],
          correct: 1
        },
        {
          q: "Қара сөздер қай жылы жарық көрді? (20)",
          a: ["1910", "1915", "1918", "1920"],
          correct: 2
        },
        {
          q: "Абайдың нешінші қара сөзінен алынған? «Екінші мінезі - намысқорлық екен. Ат аталып, аруақ шақырылған жерде ағайынға өкпе, араздыққа қарамайды екен, жанын салысады екен. «Өзіне ар тұтқан жаттан зар тұтады» деп, «Аз араздықты қуған көп пайдасын кетірер» деп, «Ағайынның азары болса да, безері болмайды»",
          a: [],
          correct: null
        },
        {
          q: "Абай еңбек туралы қай қара сөзінде ой қозғаған? (20)",
          a: ["2", "4", "25", "42"],
          correct: 2
        },
        {
          q: "Абайдың нешінші қара сөзінен алынған? «Бұл жасқа келгенше жақсы өткіздік пе, жаман өткіздік пе, әйтеуір бірталай өмірімізді өткіздік: алыстық, жұлыстық, айтыстық, тартыстық – әурешілікті көре-көре келдік. Енді жер ортасы жасқа келдік: қажыдық, жалықтық; қылып жүрген ісіміздің баянсызын, байлаусызын көрдік, бәрі қоршылық екенін білдік. Ал, енді қалған өмірімізді қайтып, не қылып өткіземіз? Соны таба алмай өзім де қайранмын» (Бірінші) (20)",
          a: ["Бірінші", "Екінші", "Үшінші", "Төртінші"],
          correct: 0
        },
        {
          q: "Абайдың 45-қара сөзінде не айтылған? (20)",
          a: [
            "45-қара сөзінде Абай өз іс-әрекетінің мәнін терең түсіндіріп, адам бойындағы әр түрлі кемшіліктерді мойындап, оларды жеңуге күш салуды насихаттайды.",
            "Басқа жауап 1",
            "Басқа жауап 2",
            "Басқа жауап 3"
          ],
          correct: 0
        },
        {
          q: "Абайдың бір қаза сөзін айтып беріңіздер.",
          a: [],
          correct: null
        }
      ]
    ];

    // Инициализация прогресса через sessionStorage, если ещё не сохранён
    if (!sessionStorage.getItem("progress")) {
      const progress = {};
      for (let topic in questions) {
        // Для удобства используем названия категорий, как указано ниже
        let topicName;
        switch (parseInt(topic)) {
          case 0: topicName = "Абайдың өмірбаяны"; break;
          case 1: topicName = "Абайдың өлеңдері"; break;
          case 2: topicName = "Әр-түрлі сұрақтар"; break;
          case 3: topicName = "Қара сөздер"; break;
        }
        progress[topicName] = {
          currentIndex: 0,
          total: questions[topic].length
        };
      }
      sessionStorage.setItem("progress", JSON.stringify(progress));
    }

    const progress = JSON.parse(sessionStorage.getItem("progress"));

    // Функция отрисовки главной страницы (выбор категории)
    function renderCategories() {
      const container = document.getElementById('categoriesContainer');
      container.innerHTML = "";
      for (let i = 0; i < questions.length; i++) {
        // Определяем название категории по индексу (в соответствии с порядком)
        let topicName;
        switch(i) {
          case 0: topicName = "Абайдың өмірбаяны"; break;
          case 1: topicName = "Абайдың өлеңдері"; break;
          case 2: topicName = "Әр-түрлі сұрақтар"; break;
          case 3: topicName = "Қара сөздер"; break;
        }
        const div = document.createElement('div');
        div.className = "category";
        // Если категория закончена, делаем её неактивной
        if (progress[topicName].currentIndex >= progress[topicName].total) {
          div.style.opacity = "0.5";
          div.style.cursor = "default";
        } else {
          // При клике сохраняем выбранную тему и переходим на страницу вопроса
          div.addEventListener('click', () => {
            sessionStorage.setItem("selectedTopic", topicName);
            window.location.href = "question.html";
          });
        }
        div.innerHTML = `<div>${topicName}</div>
                         <div class="counter">${progress[topicName].total - progress[topicName].currentIndex} сұрақ</div>`;
        container.appendChild(div);
      }
    }

    // Функция для сброса прогресса и перезапуска викторины
    function restartQuiz() {
      sessionStorage.removeItem("progress");
      sessionStorage.removeItem("selectedTopic");
      location.reload();
    }

    // Первоначальный запуск – отрисовка категорий
    renderCategories();
  </script>
</body>
</html>
